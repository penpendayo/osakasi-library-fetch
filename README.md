# OSAKASHI-LIBRARY-FETCH - å¤§é˜ªå¸‚å›³æ›¸é¤¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãƒ„ãƒ¼ãƒ«

[å¤§é˜ªå¸‚å›³æ›¸é¤¨ã® WEB ã‚µã‚¤ãƒˆ](https://www.oml.city.osaka.lg.jp/)ã‹ã‚‰ã€Œäºˆç´„ä¸€è¦§ã€ã¨ã€Œè²¸å‡ºä¸€è¦§ã€ã‚’å–å¾—ã—ã¦ HTML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚  

[ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ãƒˆ](https://library-osakashi.web.app/)

## ä½¿ã„æ–¹ğŸ“–

### 1.clone
`git clone`ã§ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ clone ã—ã¾ã™ã€‚
### 2.npm install
`npm install`ã‚’å©ã„ã¦ã€å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
### 3.GitHubã®è¨­å®šã‹ã‚‰Actions secretsã‚’è¨­å®š
GitHubã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‹ã‚‰ã€`LOGIN_INFO`ã¨ã„ã†ã‚­ãƒ¼åã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå€¤ã‚’è¨­å®šã—ã¾ã™ã€‚
```
{
  "ids": ["1äººç›®ã®ãƒ­ã‚°ã‚¤ãƒ³ID", "2äººç›®ã®ãƒ­ã‚°ã‚¤ãƒ³ID"],
  "passwords": ["1äººç›®ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", "2äººç›®ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"],
  "names": ["1äººç›®ã®åå‰", "2äººç›®ã®åå‰"]
}
```
ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚
```
{
  "ids": ["abc", "cde"],
  "passwords": ["1234", "5678"],
  "names": ["ã—ã‚“", "ã‹ãª"]
}
```
namesã®éƒ¨åˆ†ã¯ä»»æ„ã§ã™ã€‚ï¼ˆã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ãƒˆã‚’ã”è¦§ãã ã•ã„ï¼‰

### 4.å–å¾—
15åˆ†ã«1å›ã€GitHubActionãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
ç”Ÿæˆå ´æ‰€ã¯ã€`gh-pages`ãƒ–ãƒ©ãƒ³ãƒã®`/result.html`ã§ã™ã€‚

## ãã®ä»–ğŸƒ
ã‚µã‚¤ãƒˆã«è² è·ã‚’ã‹ã‘ãªã„ãŸã‚ã«ã€ä¸¦è¡Œã§å‡¦ç†ã›ãšã«ã€Œ1äººç›®ãŒçµ‚ã‚ã£ãŸã‚‰2äººç›®ã€2äººç›®ãŒçµ‚ã‚ã£ãŸã‚‰3äººç›®ã€ã¨ã„ã†é¢¨ã«ç›´åˆ—ã«å‡¦ç†ã—ã¦ã„ãã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®éƒ¨åˆ†ã§ã™ã€‚
```
 body = await idList.reduce(
      async (acc, v, i) =>
        (await acc) + (await getHTML(idList[i], pwList[i], nameList[i])),
      Promise.resolve("")
    );
```
ãªã®ã§å˜ç´”è¨ˆç®—ã§äººæ•°ã‚’nå€ã«ã™ã‚‹ã¨å‡¦ç†ã«ã‹ã‹ã‚‹æ™‚é–“ã‚‚nå€ã«ãªã‚Šã¾ã™ã€‚ä¸¦è¡Œã§å‡¦ç†ã—ãŸã„å ´åˆã¯`Promise.all`ãªã©ã‚’ä½¿ã£ãŸå‡¦ç†ã«æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚
## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

[SUSHI-WARE LICENSE](https://github.com/MakeNowJust/sushi-ware)ã§é…å¸ƒã—ã¾ã™ğŸ˜‹ã€€  
ãŠå¯¿å¸ãŸã¹ãŸã„ğŸ£

é€£çµ¡å…ˆï¼š [@penpen_dev](https://twitter.com/penpen_dev)
